
/**
 * 由 Fantastic-mobile 提供技术支持
 * Powered by Fantastic-mobile
 * https://fantastic-mobile.hurui.me/
 */
    
import{d as G,Y as O,Z as h,$ as U,q as T,z as X,r as Y,g as Z,a0 as v,n as K,j as n,a1 as $,k as s,b as g,a2 as F,u as t,X as m,G as f,I as i,J as x,w as _,R as z,U as L,T as P,V as l,_ as Q,t as b,a3 as I,L as ee,a as te,o as r,e as ae,a4 as se,c as N,P as re}from"./index-DVNi33c_.js";const oe={class:"min-h-[var(--g-navbar-min-height)] w-full flex-center"},ne={class:"h-full flex-center whitespace-nowrap px-2 empty:hidden"},ie={class:"truncate"},le={class:"h-full flex-center whitespace-nowrap px-2 empty:hidden"},ce={key:0,class:"copyright relative flex flex-wrap items-center justify-center p-4 text-sm text-primary/50"},be={key:0,class:"px-1"},de=["href"],pe={key:1,class:"px-1"},he={key:2,href:"https://beian.miit.gov.cn/",target:"_blank",rel:"noopener",class:"px-1 text-center no-underline"},fe={class:"min-h-[var(--g-tabbar-min-height)] w-full flex-center px-4"},ue={key:1,class:"text-xs"},ve=G({name:"FmPageLayout",__name:"index",props:{titleCenter:{type:Boolean,default:!0},navbar:{type:Boolean,default:void 0},navbarBorder:{type:Boolean,default:!0},navbarClass:{},tabbar:{type:Boolean,default:void 0},tabbarBorder:{type:Boolean,default:!0},tabbarClass:{},copyright:{type:Boolean,default:void 0},backTop:{type:Boolean,default:void 0}},emits:["scroll","reachTop","reachBottom"],setup(ge,{expose:V,emit:j}){const y=j,k=ee(),a=O(),u=h("layoutRef"),{y:A,arrivedState:M}=U(u);T(X(M),e=>{e.top&&y("reachTop"),e.bottom&&y("reachBottom")},{deep:!0}),V({ref:u});function W(e){y("scroll",e)}const w=h("startSideRef"),C=h("endSideRef"),d=Y(0);Z(()=>{const{width:e}=v(w,void 0,{box:"border-box"}),{width:c}=v(C,void 0,{box:"border-box"});T([e,c],p=>{d.value=Math.max(...p)},{immediate:!0})});const R=h("navbarRef"),{height:D}=v(R,void 0,{box:"border-box"}),E=K(()=>a.settings.tabbar.list.length>0?a.settings.tabbar.list:[]),B=h("tabbarRef"),{height:H}=v(B,void 0,{box:"border-box"});function S(e){return k.fullPath===e.path?e.activeIcon??e.icon??void 0:e.icon??void 0}function J(){var e;(e=u.value)==null||e.scrollTo({top:0,behavior:"smooth"})}return(e,c)=>{const p=Q,q=te("RouterLink");return r(),n("div",{ref_key:"layoutRef",ref:u,class:"relative h-vh flex flex-col overflow-auto overscroll-none supports-[(height:100dvh)]:h-dvh",style:m({"--g-navbar-height":`max(${t(D)}px, var(--g-navbar-min-height))`,"--g-tabbar-height":`max(${t(H)}px, var(--g-tabbar-min-height))`}),onScroll:c[0]||(c[0]=o=>W(o))},[$(s("header",{ref_key:"navbarRef",ref:R,class:i(t(x)("navbar relative w-full flex-col-center bg-[var(--g-navbar-bg)] text-[var(--g-navbar-color)] transition-all pt-safe min-h+safe-t-[var(--g-navbar-min-height)]",{"shadow-[0_1px_0_0_hsl(var(--border))]":e.navbarBorder},e.navbarClass))},[s("div",oe,[s("div",{class:"h-full flex items-center justify-start",style:m({...e.titleCenter&&t(d)&&{width:`round(up, ${t(d)}px, 1px)`}})},[s("div",{ref_key:"startSideRef",ref:w,class:"h-full flex-center whitespace-nowrap"},[s("div",ne,[f(e.$slots,"navbar-start",{},void 0,!0)])],512)],4),s("div",{class:i(["min-w-0 flex-1 text-sm",{"text-center":e.titleCenter}])},[s("div",ie,[f(e.$slots,"navbar",{},()=>[ae(b(t(a).title),1)],!0)])],2),s("div",{class:"h-full flex items-center justify-end",style:m({...e.titleCenter&&t(d)&&{width:`round(up, ${t(d)}px, 1px)`}})},[s("div",{ref_key:"endSideRef",ref:C,class:"h-full flex-center whitespace-nowrap"},[s("div",le,[f(e.$slots,"navbar-end",{},void 0,!0)])],512)],4)])],2),[[F,e.navbar??t(a).settings.navbar.enable]]),s("div",{class:i(t(x)("relative flex flex-1 flex-col transition-margin",{...(e.navbar??t(a).settings.navbar.enable)&&{"mt+safe-[var(--g-navbar-height)]":!0},...(e.tabbar??t(a).settings.tabbar.enable)&&{"mb+safe-[var(--g-tabbar-height)]":!0}}))},[f(e.$slots,"default",{},void 0,!0),g(P,z(L({enterActiveClass:"ease-out",enterFromClass:"opacity-0",enterToClass:"opacity-100",leaveActiveClass:"ease-in",leaveFromClass:"opacity-100",leaveToClass:"opacity-0"})),{default:_(()=>[e.copyright??t(a).settings.copyright.enable?(r(),n("div",ce,[c[1]||(c[1]=s("span",{class:"px-1"},"Copyright",-1)),g(p,{name:"i-ri:copyright-line",class:"text-lg"}),t(a).settings.copyright.dates?(r(),n("span",be,b(t(a).settings.copyright.dates),1)):l("",!0),t(a).settings.copyright.company?(r(),n(I,{key:1},[t(a).settings.copyright.website?(r(),n("a",{key:0,href:t(a).settings.copyright.website,target:"_blank",rel:"noopener",class:"px-1 text-center no-underline"},b(t(a).settings.copyright.company),9,de)):(r(),n("span",pe,b(t(a).settings.copyright.company),1))],64)):l("",!0),t(a).settings.copyright.beian?(r(),n("a",he,b(t(a).settings.copyright.beian),1)):l("",!0)])):l("",!0)]),_:1},16)],2),$(s("footer",{ref_key:"tabbarRef",ref:B,class:i(t(x)("tabbar flex-col-center bg-[var(--g-tabbar-bg)] transition-all pb-safe min-h+safe-b-[calc(var(--g-tabbar-min-height))]",{"shadow-[0_-1px_0_0_hsl(var(--border))]":e.tabbarBorder},e.tabbarClass))},[s("div",fe,[f(e.$slots,"tabbar",{},()=>[(r(!0),n(I,null,se(t(E),o=>(r(),N(q,{key:JSON.stringify(o),class:i(["flex flex-1 flex-col items-center text-[var(--g-tabbar-color)] no-underline transition-all",{"text-[var(--g-tabbar-active-color)]!":t(k).fullPath===o.path}]),to:o.path,replace:""},{default:_(()=>[S(o)?(r(),N(p,{key:0,name:S(o)??"",class:i(o.text?"text-6":"text-8")},null,8,["name","class"])):l("",!0),o.text?(r(),n("div",ue,b(o.text),1)):l("",!0)]),_:2},1032,["class","to"]))),128))],!0)])],2),[[F,e.tabbar??t(a).settings.tabbar.enable]]),g(P,z(L({enterActiveClass:"ease-out duration-300",enterFromClass:"opacity-0 translate-y-4",enterToClass:"opacity-100 translate-y-0",leaveActiveClass:"ease-in duration-200",leaveFromClass:"opacity-100 scale-100",leaveToClass:"opacity-0 scale-50"})),{default:_(()=>[(e.backTop??t(a).settings.app.enableBackTop)&&t(A)>=200?(r(),n("div",{key:0,class:i(["back-top size-12 flex-center cursor-pointer border rounded-full bg-background shadow-lg transition-all active:bg-border",{...(e.tabbar??t(a).settings.tabbar.enable)&&{"bottom+safe-[calc(var(--g-tabbar-height)+16px)]!":!0}}]),onClick:J},[g(p,{name:"i-icon-park-outline:to-top-one",class:"text-6"})],2)):l("",!0)]),_:1},16)],36)}}}),me=re(ve,[["__scopeId","data-v-ea7fba1b"]]);export{me as _};
